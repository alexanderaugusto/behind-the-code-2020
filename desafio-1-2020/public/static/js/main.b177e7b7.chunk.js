(this["webpackJsonpui-template"]=this["webpackJsonpui-template"]||[]).push([[0],{48:function(e,a,t){e.exports=t(86)},53:function(e,a,t){},86:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(43),o=t.n(l),i=(t(53),t(10)),c=t.n(i),s=t(13),u=t(7),m=t(90),d=t(93),p=t(96),b=t(87),g=t(91),f=t(92),h=function(e){var a,t=e.clear,l=e.submitHandler,o=Object(n.useState)("waiting"),i=Object(u.a)(o,2),c=i[0],s=i[1],d=Object(n.useState)(!1),h=Object(u.a)(d,2),E=h[0],v=h[1],x=Object(n.useState)(null),y=Object(u.a)(x,2),O=y[0],j=y[1],S=null;switch(E&&(S=r.a.createElement(m.a,{kind:"error",lowContrast:!0,title:"O tamanho de '".concat(E,"' \xe9 maior do que o limite"),subtitle:"O tamanho m\xe1ximo \xe9 10MB. Por favor selecione outro arquivo e tente novamente.",onCloseButtonClick:function(){return v(!1)}})),c){case"waiting":a=r.a.createElement("div",{className:"bx--file__container"},r.a.createElement("strong",{className:"bx--file--label"},"Imagem para classifica\xe7\xe3o"),r.a.createElement("p",{className:"bx--label-description"},"Somente arquivos .jpg e .png. Tamanho m\xe1ximo 10MB."),r.a.createElement(p.a,{accept:["image/jpeg","image/png"],labelText:"Arraste a imagem aqui ou clique para fazer o upload",onAddFiles:function(e,a){return function(e){e.addedFiles[0].size>1e7?v(e.addedFiles[0].name):(v(!1),j(e.addedFiles[0]),s("uploaded"))}(a)}}));break;default:a=r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{marginBottom:"1rem"}},"Sua imagem:"),r.a.createElement("img",{src:URL.createObjectURL(O),alt:O.name,style:{maxHeight:"256px",maxWidth:"100%"}}),r.a.createElement(b.a,{kind:"danger",size:"small",style:{margin:"1rem 0"},onClick:function(){s("waiting"),j(null),t()}},"Remover"))}return r.a.createElement(g.a,{onSubmit:function(e){return l(e,O)}},r.a.createElement(f.a,null,a),S,r.a.createElement(b.a,{disabled:null===O,type:"submit"},"Analisar imagem"))},E=t(45),v=t.n(E),x=t(47),y=t.n(x),O=t(94),j=t(95),S=t(16),k=function(e){var a=e.setNotification,t=Object(n.useState)(""),l=Object(u.a)(t,2),o=l[0],i=l[1],m=Object(n.useState)(""),p=Object(u.a)(m,2),b=p[0],g=p[1],f=Object(n.useState)(""),h=Object(u.a)(f,2),E=h[0],x=h[1],k=Object(n.useState)(""),T=Object(u.a)(k,2),w=T[0],C=T[1],I=Object(n.useState)(!1),N=Object(u.a)(I,2),B=N[0],A=N[1],q=function(){var e=Object(s.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.next=3,fetch("/api/credentials",{method:"POST",body:JSON.stringify({password:w,apikey:o,url:b,collectionId:E}),headers:{"Content-Type":"application/json"}});case 3:if(t=e.sent,A(!1),!0===t.ok){e.next=9;break}a({type:"error",title:"Error",msg:"Algo deu errado na comunica\xe7\xe3o com o servidor. Por favor, tente novamente."}),e.next=13;break;case 9:return e.next=11,t.json();case 11:!0===(n=e.sent).err?a({type:"error",title:"Erro",msg:n.msg}):a({type:"success",title:"Sucesso",msg:n.msg});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=null;return!0===B&&(P=r.a.createElement(d.a,{description:"Trocando credenciais..."})),r.a.createElement(S.Header,{"aria-label":"Maratona Behind the Code 2020 Desafio 1"},r.a.createElement(S.HeaderName,{href:"/",prefix:"Maratona Behind the Code 2020"},"Desafio 1"),r.a.createElement(S.HeaderGlobalBar,null,r.a.createElement(S.HeaderGlobalAction,{"aria-label":"GitHub",onClick:function(){return window.open("https://github.com/maratonadev-br/desafio-1-2020")}},r.a.createElement(v.a,null)),r.a.createElement(O.a,{modalLabel:"Troca de credenciais",modalHeading:"Para usar um outro modelo, insira as credenciais do Watson Visual Recognition e a sua senha.",primaryButtonText:"Trocar",secondaryButtonText:"Cancelar",iconDescription:"Trocar credenciais",renderTriggerButtonIcon:function(){return r.a.createElement(y.a,null)},buttonTriggerClassName:"icon-button",style:{textAlign:"left"},handleSubmit:q},r.a.createElement(j.a,{id:"apikey",placeholder:"Insira a API key aqui...",labelText:"Chave de API (API KEY) do servi\xe7o de Visual Recognition",value:o,onChange:function(e){return i(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(j.a,{id:"url",placeholder:"Insira a URL aqui...",labelText:"URL para chamada de API do servi\xe7o de Visual Recognition",value:b,onChange:function(e){return g(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(j.a,{id:"classifierId",placeholder:"Insira o Classifier ID aqui...",labelText:"ID do classificador (Classifier ID)",value:E,onChange:function(e){return x(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(j.a,{id:"pw",type:"password",placeholder:"Insira a senha aqui...",labelText:"Senha escolhida durante o deploy",value:w,onChange:function(e){return C(e.target.value)}}),P)))},T=function(e){var a=e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{marginTop:"1rem"}},"Resultados da an\xe1lise"),r.a.createElement("div",{className:"bx--row",style:{marginBottom:"1rem",display:"flex"}},a.map((function(e){return r.a.createElement("div",{key:e.class,className:"bx--col analysis-card"},r.a.createElement("h4",{style:{marginBottom:"0.5rem"}},"Classe: ",r.a.createElement("strong",null,e.class)),r.a.createElement("div",{className:"progress-total",id:"progress"},r.a.createElement("div",{className:"progress-current",style:{width:Math.floor(100*e.score)+"%"}}),r.a.createElement("div",{className:"progress-text"},Math.floor(100*e.score)+"%")),r.a.createElement("label",{for:"progress"},"N\xedvel de confian\xe7a"))}))))},w=function(e){var a=e.setNotification,t=Object(n.useState)(""),l=Object(u.a)(t,2),o=l[0],i=l[1],m=Object(n.useState)(!1),p=Object(u.a)(m,2),b=p[0],g=p[1],f=function(){var e=Object(s.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,fetch("/api/submit",{method:"POST",body:JSON.stringify({password:o}),headers:{"Content-Type":"application/json"}});case 3:if(!0===(t=e.sent).ok){e.next=8;break}a({type:"error",title:"Erro",msg:"Algo deu errado na comunica\xe7\xe3o com o servidor. Por favor, tente novamente."}),e.next=12;break;case 8:return e.next=10,t.json();case 10:!0===(n=e.sent).err?a({type:"error",title:"Erro",msg:n.msg}):a({type:"success",title:"Estamos quase l\xe1!",msg:n.msg});case 12:g(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=null;return!0===b&&(h=r.a.createElement(d.a,{description:"Enviando..."})),r.a.createElement("div",{className:"bx--header-panel bx--header-panel--expanded side-panel",style:{zIndex:2}},r.a.createElement("h2",{style:{textAlign:"center"}},"Desafio 1 | Cocamar"),r.a.createElement("br",null),r.a.createElement("p",{style:{textAlign:"center"}},"Desenvolva um classificador de imagens para detectar pragas no plantio."),r.a.createElement("br",null),r.a.createElement(O.a,{shouldSubmitOnEnter:!0,buttonTriggerText:"Submeter",modalHeading:"Aten\xe7\xe3o: ap\xf3s clicar em submeter, voc\xea receber\xe1 um e-mail pedindo para confirmar sua submiss\xe3o clicando em um link. Voc\xea dever\xe1 clicar no link para concluir a submiss\xe3o.",modalLabel:"Submiss\xe3o",primaryButtonText:"Submeter",secondaryButtonText:"Cancelar",handleSubmit:f,style:{zIndex:99999}},r.a.createElement(j.a,{id:"password",type:"password",value:o,onChange:function(e){return i(e.target.value)},labelText:"Digite a senha escolhida durante o deploy para submeter",placeholder:"Insira a senha aqui..."}),h))};var C=function(){var e=Object(n.useState)(null),a=Object(u.a)(e,2),t=a[0],l=a[1],o=Object(n.useState)(null),i=Object(u.a)(o,2),p=i[0],b=i[1],g=Object(n.useState)(!1),f=Object(u.a)(g,2),E=f[0],v=f[1],x=function(){var e=Object(s.a)(c.a.mark((function e(a,t){var n,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),v(!0),(n=new FormData).append("image",t),e.next=6,fetch("/api/analyze",{method:"POST",body:n});case 6:if(!0===(r=e.sent).ok){e.next=11;break}l({type:"error",title:"Erro",msg:"Algo deu errado na comunica\xe7\xe3o com o servidor. Por favor, certifique-se de que sua conex\xe3o est\xe1 est\xe1vel e tente novamente."}),e.next=15;break;case 11:return e.next=13,r.json();case 13:!0===(o=e.sent).err?l({type:"error",title:"Erro",msg:o.msg}):b(o.result.sort((function(e,a){return a.score-e.score})).slice(0,3));case 15:v(!1);case 16:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),y=null;t&&(y=r.a.createElement(m.b,{lowContrast:!0,kind:t.type,title:t.title,subtitle:t.msg,caption:null,style:{zIndex:1e4,position:"fixed",bottom:"1rem",right:"17rem"},onCloseButtonClick:function(){return l(null)}}));var O=null;null!==p&&(O=r.a.createElement(T,{data:p}));var j=null;return!0===E&&(j=r.a.createElement(d.a,null)),r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{setNotification:l}),r.a.createElement(w,{setNotification:l}),r.a.createElement("div",{className:"bx--grid",style:{marginTop:"5rem",marginRight:"16rem",paddingBottom:"1rem",height:"calc(100vh - 5rem)",position:"relative"}},r.a.createElement(h,{submitHandler:x,clear:function(){return b(null)}}),O,j,y))};o.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.b177e7b7.chunk.js.map